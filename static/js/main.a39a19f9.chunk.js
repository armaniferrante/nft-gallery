(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{136:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f}));var r=n(2),a=n(59),i=n(39),c={version:"0.0.0",name:"nft_swap",instructions:[{name:"advertise",accounts:[{name:"advert",isMut:!0,isSigner:!1},{name:"nft",isMut:!0,isSigner:!1},{name:"owner",isMut:!0,isSigner:!0},{name:"swapSigner",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[{name:"price",type:"u64"},{name:"bump",type:"u8"}]},{name:"propose",accounts:[{name:"proposal",isMut:!0,isSigner:!1},{name:"advertA",isMut:!1,isSigner:!1},{name:"advertB",isMut:!1,isSigner:!1},{name:"tokenReceiver",isMut:!1,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"bump",type:"u8"}]},{name:"accept",accounts:[{name:"proposal",isMut:!0,isSigner:!1},{name:"advert",isMut:!1,isSigner:!1},{name:"tokenReceiver",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"execute",accounts:[{name:"proposal",isMut:!0,isSigner:!1},{name:"rentExemptionRecipient",isMut:!0,isSigner:!1},{name:"advertA",isMut:!0,isSigner:!1},{name:"advertB",isMut:!0,isSigner:!1},{name:"nftA",isMut:!0,isSigner:!1},{name:"nftB",isMut:!0,isSigner:!1},{name:"advertATokenB",isMut:!0,isSigner:!1},{name:"advertBTokenA",isMut:!0,isSigner:!1},{name:"swapSigner",isMut:!1,isSigner:!1},{name:"advertAAuthority",isMut:!0,isSigner:!1},{name:"advertBAuthority",isMut:!0,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"advertisement",type:{kind:"struct",fields:[{name:"nft",type:"publicKey"},{name:"bump",type:"u8"},{name:"price",type:"u64"},{name:"authority",type:"publicKey"}]}},{name:"proposal",type:{kind:"struct",fields:[{name:"advertA",type:"publicKey"},{name:"advertB",type:"publicKey"},{name:"advertATokenB",type:"publicKey"},{name:"advertBTokenA",type:"publicKey"},{name:"rentExemptionRecipient",type:"publicKey"},{name:"bump",type:"u8"}]}}],errors:[{code:300,name:"Unknown"}]},u=n(4),o=n(21),s=Object(r.createContext)(null);function p(e){var t=Object(i.c)(),n=Object(r.useMemo)((function(){var e=new u.Connection("https://api.mainnet-beta.solana.com","recent");return new a.c(e,t,{preflightCommitment:"recent",commitment:"recent"})}),[t]),p=Object(r.useMemo)((function(){var e=new u.PublicKey("2joi9QJe3GN55vkRhUtMNU9QN4zKmBJDH8Y2zJ8d4gs4");return{nftSwap:new a.b(c,e,n),provider:n}}),[n]).nftSwap;return Object(o.jsx)(s.Provider,{value:{provider:n,nftSwap:p},children:e.children})}function f(){var e=Object(r.useContext)(s);if(null===e)throw new Error("Context not available");return e}},293:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(14),a=n(0),i=n.n(a),c=n(5),u=n(45),o=n(59),s=n(102),p=n(4);function f(e,t){return l.apply(this,arguments)}function l(){return(l=Object(c.a)(i.a.mark((function e(t,n){var a,u,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b(n),e.next=3,t.getProgramAccounts(s.b,{commitment:t.commitment,filters:a});case 3:return u=e.sent,o=u.map((function(e){var t=e.pubkey,n=e.account,r=n.data,a=n.executable,i=n.owner,c=n.lamports;return{publicKey:new p.PublicKey(t),accountInfo:{data:r,executable:a,owner:new p.PublicKey(i),lamports:c}}})).map((function(e){return{publicKey:e.publicKey,account:d(e.accountInfo.data)}})).filter((function(e){return e.account.amount.toNumber()>0})),e.next=7,Promise.all(o.map(function(){var e=Object(c.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.c.getAssociatedTokenAddress(s.a,s.b,t.account.mint,n);case 2:return r=e.sent,e.abrupt("return",[t,r]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",e.sent.map((function(e){return Object(r.a)(e,1)[0]})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m=u.struct([u.blob(32,"mint"),u.blob(32,"owner"),u.nu64("amount"),u.blob(93)]);function d(e){var t=m.decode(e),n=t.mint,r=t.owner,a=t.amount;return{mint:new p.PublicKey(n),owner:new p.PublicKey(r),amount:new o.a(a)}}function b(e){return[{memcmp:{offset:m.offsetOf("owner"),bytes:e.toBase58()}},{dataSize:m.span}]}},310:function(e,t,n){},312:function(e,t){},313:function(e,t){},314:function(e,t){},321:function(e,t){},336:function(e,t){},337:function(e,t){},356:function(e,t){},404:function(e,t){},406:function(e,t){},420:function(e,t){},424:function(e,t){},426:function(e,t){},436:function(e,t){},438:function(e,t){},469:function(e,t){},471:function(e,t){},478:function(e,t){},479:function(e,t){},503:function(e,t){},504:function(e,t){},508:function(e,t){},516:function(e,t,n){},517:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),i=n(124),c=n.n(i),u=(n(310),n(14)),o=n(97),s=n(134),p=n(190),f=n(27),l=n(533),m=n(534),d=n(530),b=n(535),j=n(21);function g(){var e=Object(f.g)().address;console.log("using address",e);var t=Object(o.c)(e);return Object(j.jsx)(d.a,{container:!0,spacing:1,children:t&&t.result&&t.result.filter((function(e){return void 0!==e.metadata})).map((function(e,t){return Object(j.jsx)(x,{tokenInfo:e},t)}))})}function x(e){var t=e.tokenInfo,n=Object(o.b)(t.metadata);return n.result?Object(j.jsx)(d.a,{item:!0,xs:2,sm:4,md:4,children:Object(j.jsx)("img",{alt:n.result.name,style:{width:"100%"},src:n.result.image})}):Object(j.jsx)("div",{style:{width:"33%",display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(j.jsx)(b.a,{style:{marginLeft:"auto",marginRight:"auto",width:"50px",height:"50px"}})})}function h(){return Object(j.jsx)("div",{children:"MATCH"})}var v=n(136);n(516);function y(){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(l.a,{}),Object(j.jsx)(o.a,{children:Object(j.jsx)(v.a,{children:Object(j.jsx)(p.a,{basename:"/nft-gallery",children:Object(j.jsxs)("div",{children:[Object(j.jsx)(O,{}),Object(j.jsxs)(f.c,{children:[Object(j.jsx)(f.a,{exact:!0,path:"/me",component:g}),Object(j.jsx)(f.a,{exact:!0,path:"/wallet/:address",component:g}),Object(j.jsx)(f.a,{exact:!0,path:"/match",component:h})]})]})})})})]})}var w=Object(m.a)((function(){return{searchBar:{"&:focus":{width:"600px"},border:"1pt solid #ccc",backgroundColor:"rgb(249 249 249)",width:"400px",borderRadius:"8px",outline:"none",paddingLeft:"10px",paddingRight:"10px",height:"30px",transition:"width .3s"},homeButton:{"&:hover":{cursor:"pointer"}}}}));function O(){var e=Object(f.f)(),t=w(),n=Object(r.useState)(""),a=Object(u.a)(n,2),i=a[0],c=a[1];return Object(j.jsxs)("div",{style:{paddingLeft:"8px",paddingRight:"8px",backgroundColor:"rgb(105 85 235)",display:"flex",justifyContent:"space-between"},children:[Object(j.jsxs)("div",{style:{display:"flex"},children:[Object(j.jsx)("div",{className:t.homeButton,onClick:function(){e.push("/me")},style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(j.jsx)("img",{style:{height:"45px"},src:"https://dao.projectserum.com/static/media/dark-horizontal-combined-rainbow.inline.4abc2aec.svg"})}),Object(j.jsx)("div",{style:{marginLeft:"8px",display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(j.jsx)("input",{value:i,onKeyDown:function(t){"Enter"===t.key&&e.push("/wallet/".concat(t.target.value))},onChange:function(e){return c(e.target.value)},placeholder:"Search...",className:t.searchBar})})]}),Object(j.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(j.jsx)(s.b,{style:{height:"35px",backgroundColor:"#f35757",borderRadius:10}})})]})}var S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,537)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};c.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(y,{})}),document.getElementById("root")),S()},97:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return y}));var r=n(0),a=n.n(r),i=n(18),c=n(5),u=n(2),o=n(191),s=n(59),p=n(4),f=n(39),l=n(3),m=n(139),d=n(134),b=n(293),j=n(136),g=n(295),x=n(21);function h(e){var t=l.e.Mainnet,n=Object(u.useMemo)((function(){return Object(p.clusterApiUrl)(t)}),[t]),r=Object(u.useMemo)((function(){return[Object(m.a)(),Object(m.b)(),Object(m.c)({network:t})]}),[t]);return Object(x.jsx)(f.a,{endpoint:n,children:Object(x.jsx)(f.b,{wallets:r,autoConnect:!0,children:Object(x.jsx)(d.a,{children:e.children})})})}function v(e){var t=Object(j.b)().provider;return Object(o.a)(Object(c.a)(a.a.mark((function n(){var r,u,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==(r=e?new p.PublicKey(e):t.wallet?t.wallet.publicKey:void 0)){n.next=3;break}return n.abrupt("return",[]);case 3:return O(r)||S(r,new Promise(function(){var e=Object(c.a)(a.a.mark((function e(n){var c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)(t.connection,r);case 2:return(c=e.sent).forEach((function(e){var t,n;t=e.publicKey,n=new Promise((function(t){return t(e)})),P.set(t.toString(),n)})),e.next=6,Promise.all(c.map((function(e){return C(e.account.mint)})));case 6:return u=e.sent,e.t0=Promise,e.next=10,s.e.rpc.getMultipleAccounts(t.connection,u);case 10:return e.t1=e.sent.filter((function(e){return null!==e})).map((function(e){return Object(i.a)(Object(i.a)({},e),{},{account:g.metadata.decodeMetadata(e.account.data)})})),e.next=13,e.t0.all.call(e.t0,e.t1);case 13:e.sent.forEach((function(e){var t,n;t=e.account.mint,n=new Promise((function(t){return t(e)})),K.set(t.toString(),n)})),n(c.map((function(e){return e.publicKey})));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),n.next=7,O(r);case 7:return u=n.sent,n.next=10,Promise.all(u.map(function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a=t,P.get(a.toString());case 2:return n=e.sent,e.next=5,M(n.account.mint);case 5:return r=e.sent,e.abrupt("return",{data:n,metadata:r});case 7:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:return o=n.sent,console.log("returning result",o),n.abrupt("return",o);case 13:case"end":return n.stop()}}),n)}))),[t,e])}function y(e){return Object(o.a)(Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w(e.account.data.uri)||(n=e.account.uri,r=new Promise((function(t,n){fetch(e.account.data.uri).then((function(e){return e.json()})).then(t).catch(n)})),A.set(n,r)),t.next=4,w(e.account.uri);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}var n,r}),t)}))),[e])}function w(e){return A.get(e)}function O(e){return k.get(e.toString())}function S(e,t){k.set(e.toString(),t)}function M(e){return K.get(e.toString())}n(511);var k=new Map,P=new Map,K=new Map,A=new Map,B=new p.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");function C(e){return R.apply(this,arguments)}function R(){return(R=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.PublicKey.findProgramAddress([e.from("metadata"),B.toBuffer(),n.toBuffer()],B);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}).call(this,n(9).Buffer)}},[[517,1,2]]]);
//# sourceMappingURL=main.a39a19f9.chunk.js.map